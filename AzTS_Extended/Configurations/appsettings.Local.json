{
  "AppMetadata": {
    "AppCurrentVersion": "1.0.0"
  },
  "AuthNSettings": {
    "ScannerIdentityConnectionString": "",
    "InternalIdentityConnectionString": ""
  },
  "AuthzSettings": {
    "IsPIMEnabled": true,
    "IsRGPIMEnabled": false,
    "MaxDegreeOfParallelismForSubPIMProcess": 50,
    "MaxDegreeOfParallelismForRGPIMProcess": 4
  },
  "AzureStorageSettings": {
    "ResourceId": "",
    "ContainerName": "azskatsscanresult",
    "QueueName": "subjobqueue",
    "FileNames": {
      "SubscriptionMetadata": "{0}/Subscriptions/SubMetaData/{1}_SubMetaData.json",
      "SubscriptionRBAC": "{0}/Subscriptions/RBAC/{1}_RBAC.json",
      "ResourceInventory": "{0}/Subscriptions/ResourceInventory/{1}_ResourceInventory.json",
      "PolicyAssessments": "{0}/Subscriptions/SSAssessmentDetails/{1}_SSAssessmentDetails.json",
      "ControlEvaluation": "{0}/Subscriptions/ControlResults/{1}_ControlResults.json"
    }
  },
  "HttpClientConfig": {
    "MaxRetries": 3,
    "RetryHttpStatusCodes": [ 429, 408, 502, 504 ],
    "RetryStepInSecs": 6
  },
  "LAConfigurations": {
    "WorkspaceId": "",
    "ResourceId": "",
    "LATypes": {
      "PolicySummary": "AzSK_PolicySummaryInfo",
      "SubscriptionRBAC": "AzSK_RBAC",
      "ADGraph": "AzSK_AADObjectInv",
      "PolicyAssignments": "AzSK_PolicyAssignmentsInv",
      "PolicyAssessments": "AzSK_SSAssessmentInv",
      "PolicyStates": "AzSK_PolicyStateResults",
      "ControlEvaluation": "AzSK_ControlResults",
      "ProcessedEvent": "AzSK_ProcessedSubscriptions",
      "Exceptions": "AzSK_RTExceptions",
      "PerformanceMetrics": "AzSK_PerformanceMetrics",
      "ResourceInventory": "AzSK_ResourceInvInfo"
    },
    "QueryFiles": {
      
    },
    "Functions": {

    },
    "BatchSize": 500
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Trace",
      "System.Net.Http": "None"
    }
  },
  "WebJobConfigurations": {
    "ForceFetch": false,
    "MaxExecutionTimeInUTCHour": 14
  },
  "FeatureManagement": {
    "All": true,
    "ManagementGroups": true,
    "ADGraph": true,
    "Subscriptions": true,
    "PolicyDefinitions": true,
    "BaselineControls": true,
    "ControlScanException": true,
    "ScanExternalControl": true,
    "ControlResultRetention": true
  },
  "ManagementGroupConfigurations": {
    "ManagementGroupId": "",
    "HierarchyTraverseLimit": 7
  },
  "GraphConfigurations": {
    "BatchSize": 1000
  },
  "WorkItemProcessorSettings": {
    "BatchSize": 30000,
    "MinThreshold": 1,
    "MessageMaxTimeToLive": "03:00:00",
    "CacheClearingOn": true,
    "VerificationResultRetentionPeriodInDays": 7
  },
  "RepositorySettings": {
    "SQLDatabase": {
      "ResourceEvaluationLimit": 5000
    },
    "Storage": {
      "StorageContainerFetchLimit": 5000
    },
    "VirtualMachineScaleSet": {
      "VirtualMachineInstancesLimit": 50
    },
    "LogicApps": {
      "LogicAppsReturnObjectsLimit": 50000
    }
  },
  "AzureSQLSettings": {
    "IsFeatureEnabled": false,
    "UseKeyVault": false,
    "ConnectionStringForGetRequest": "FILL",
    "ConnectionStringForUploadRequest": "FILL",
    "ConnectionStringKeyVaultUriForGetRequest": "FILL",
    "ConnectionStringKeyVaultUriForUploadRequest": "FILL",
    "CommandExecutionConfig": [
      {
        "FeatureId": "ControlEvaluationScheduledScanSQLWrite",
        "Name": "[dbo].[LastKnownScanResultRawSS]",
        "ExecutionType": "SqlBulkCopy",
        "BatchSize": 0
      },
      {
        "FeatureId": "RoleAssignmentDetailsSQLWrite",
        "Name": "[dbo].[RoleAssignmentDetailsRawSS]",
        "ExecutionType": "SqlBulkCopy",
        "BatchSize": 0
      },
      {
        "FeatureId": "ControlEvaluationAdhocScanSQLWrite",
        "Name": "[dbo].[LastKnownScanResultRawAS]",
        "ExecutionType": "SqlBulkCopy",
        "BatchSize": 0
      },
      {
        "FeatureId": "ControlExceptionSQLRead",
        "Name": "[dbo].[GetControlScanExceptionBySubscriptionId]",
        "Parameters": [
          {
            "Name": "@SubscriptionId",
            "SqlDbType": "UNIQUEIDENTIFIER"
          },
          {
            "Name": "@SubscriptionIntId",
            "SqlDbType": "INT",
            "IsNullable": true
          }
        ]
      },
      {
        "FeatureId": "BulkExceptionSQLRead",
        "Name": "[dbo].[GetBulkExceptionBySubscriptionId]",
        "Parameters": [
          {
            "Name": "@SubscriptionId",
            "SqlDbType": "UNIQUEIDENTIFIER"
          },
          {
            "Name": "@SubscriptionIntId",
            "SqlDbType": "INT",
            "IsNullable": true
          }
        ]
      },
      {
        "FeatureId": "ControlEvaluationSQLRead",
        "Name": "[dbo].[GetControlScanResultBySubscriptionId]",
        "Parameters": [
          {
            "Name": "@SubscriptionId",
            "SqlDbType": "UNIQUEIDENTIFIER"
          },
          {
            "Name": "@SubscriptionIntId",
            "SqlDbType": "INT",
            "IsNullable": true
          }
        ]
      },
      {
        "FeatureId": "SubscriptionJobIdMappingScheduledScanSQLWrite",
        "Name": "[dbo].[UpdateSubscriptionJobIdMappingSS]",
        "Parameters": [
          {
            "Name": "@SubscriptionId",
            "SqlDbType": "UNIQUEIDENTIFIER"
          },
          {
            "Name": "@SubscriptionIntId",
            "SqlDbType": "INT",
            "IsNullable": true
          },
          {
            "Name": "@JobId",
            "SqlDbType": "BIGINT"
          }
        ]
      },
      {
        "FeatureId": "SubscriptionJobIdMappingAdhocScanSQLWrite",
        "Name": "[dbo].[UpdateSubscriptionJobIdMappingAS]",
        "Parameters": [
          {
            "Name": "@SubscriptionId",
            "SqlDbType": "UNIQUEIDENTIFIER"
          },
          {
            "Name": "@SubscriptionIntId",
            "SqlDbType": "INT",
            "IsNullable": true
          },
          {
            "Name": "@JobId",
            "SqlDbType": "BIGINT"
          }
        ]
      },
      {
        "FeatureId": "ProcessAdhocScanResultFromRawToMasterSQLWrite",
        "Name": "[dbo].[ADFProcessAdhocScanResultFromRawToMaster]",
        "Parameters": [
          {
            "Name": "@SubscriptionId",
            "SqlDbType": "UNIQUEIDENTIFIER"
          }
        ]
      },
      {
        "FeatureId": "SubscriptionIntIdSQLRead",
        "Name": "[dbo].[GetSubscriptionsFromSubscriptionMaster]",
        "Parameters": [
          {
            "Name": "@SubscriptionId",
            "SqlDbType": "UNIQUEIDENTIFIER",
            "IsNullable": true
          }
        ]
      }
    ]
  }
}